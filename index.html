<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS 58mm - Chicken Noodle</title>
    <style>
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ POS */
        body { font-family: 'Tahoma', sans-serif; background-color: #eceff1; padding: 20px; display: flex; justify-content: center; }
        .pos-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 350px; }
        .input-row { margin-bottom: 15px; }
        input { width: 100%; padding: 12px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 8px; font-size: 18px; }
        .btn-print { width: 100%; padding: 15px; background: #2e7d32; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; }
        .q-display { text-align: center; font-size: 40px; font-weight: bold; color: #1565c0; margin: 10px 0; }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 58mm) */
        #receipt-section { 
            display: none; 
            width: 48mm; /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© 58mm */
            font-family: 'Courier New', Courier, monospace; /* ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à */
            font-size: 12px;
            color: #000;
            padding: 0;
            margin: 0;
        }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .line { border-top: 1px dotted #000; margin: 5px 0; }
        .big-q { font-size: 24px; font-weight: bold; border: 1px solid #000; display: inline-block; padding: 5px 10px; margin: 5px 0; }
        .flex { display: flex; justify-content: space-between; }

        @media print {
            @page { margin: 0; size: auto; }
            body { margin: 0; padding: 0; }
            .pos-card { display: none; }
            #receipt-section { display: block; }
        }
    </style>
</head>
<body>

<div class="pos-card">
    <h3 style="text-align:center; margin-top:0;">üçú ‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</h3>
    <div class="q-display">‡∏Ñ‡∏¥‡∏ß: <span id="q-next">001</span></div>
    
    <div class="input-row">
        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏ä‡∏∏‡∏î):</label>
        <input type="number" id="qty" value="1" min="1" oninput="updateTotal()">
    </div>
    <div class="input-row">
        <label>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (‡∏ö‡∏≤‡∏ó):</label>
        <input type="number" id="discount" value="0" min="0" oninput="updateTotal()">
    </div>
    <h2 style="text-align:center;">‡∏£‡∏ß‡∏°: <span id="total-text">50</span>.-</h2>
    <button class="btn-print" onclick="printOrder()">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button>
    <p style="text-align:center;"><button onclick="resetQ()" style="background:none; border:none; color:blue; text-decoration:underline; cursor:pointer;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏¥‡∏ß 001 ‡πÉ‡∏´‡∏°‡πà</button></p>
</div>

<div id="receipt-section">
    <div class="text-center">
        <strong>*** ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ***</strong><br>
        <span style="font-size: 14px;">‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</span><br>
        <div class="big-q" id="r-q">001</div><br>
        <span id="r-time" style="font-size: 10px;"></span>
    </div>
    
    <div class="line"></div>
    <div class="flex">
        <span>‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å x <span id="r-qty">1</span></span>
        <span id="r-subtotal">50</span>
    </div>
    <div class="flex" id="r-discount-div">
        <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span>
        <span id="r-discount">-0</span>
    </div>
    <div class="line"></div>
    
    <div class="flex" style="font-weight:bold; font-size: 14px;">
        <span>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</span>
        <span id="r-total">50</span>
    </div>
    <div class="line"></div>
    
    <div class="text-center" style="font-size: 10px; margin-top: 5px;">
        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏î‡∏´‡∏ô‡∏∏‡∏ô<br>‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏≠‡∏Å‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞!
    </div>
</div>

<script>
    let q = parseInt(localStorage.getItem('q_val')) || 1;
    document.getElementById('q-next').innerText = q.toString().padStart(3, '0');

    function updateTotal() {
        let qty = document.getElementById('qty').value || 0;
        let disc = document.getElementById('discount').value || 0;
        document.getElementById('total-text').innerText = (qty * 50) - disc;
    }

    function printOrder() {
        let qty = document.getElementById('qty').value;
        let disc = document.getElementById('discount').value;
        let total = (qty * 50) - disc;
        let time = new Date().toLocaleString('th-TH', { hour12: false });

        // ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        document.getElementById('r-q').innerText = q.toString().padStart(3, '0');
        document.getElementById('r-time').innerText = time;
        document.getElementById('r-qty').innerText = qty;
        document.getElementById('r-subtotal').innerText = (qty * 50).toLocaleString();
        document.getElementById('r-discount').innerText = "-" + parseInt(disc).toLocaleString();
        document.getElementById('r-total').innerText = total.toLocaleString();

        // ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå
        window.print();

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏¥‡∏ß
        q++;
        localStorage.setItem('q_val', q);
        document.getElementById('q-next').innerText = q.toString().padStart(3, '0');
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤
        document.getElementById('qty').value = 1;
        document.getElementById('discount').value = 0;
        updateTotal();
    }

    function resetQ() {
        if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô 001?")) {
            q = 1;
            localStorage.setItem('q_val', q);
            document.getElementById('q-next').innerText = "001";
        }
    }
</script>

</body>
</html>
