<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chicken Noodle POS Pro</title>
    <style>
        /* --- General Styles (Mobile First) --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Tahoma', sans-serif; 
            background: #f0f2f5; 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            height: 100vh;
        }
        .pos-app { 
            width: 100%; 
            max-width: 500px; 
            background: #fff; 
            display: flex; 
            flex-direction: column; 
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* --- Header & Queue --- */
        .header { background: #d32f2f; color: white; padding: 15px; text-align: center; }
        .header h2 { margin: 0; font-size: 20px; }
        .q-badge { 
            background: rgba(0,0,0,0.3); 
            padding: 5px 15px; 
            border-radius: 8px; 
            font-size: 24px; 
            font-weight: bold; 
            margin-top: 5px; 
            display: inline-block;
        }

        /* --- Menu Grid --- */
        .menu-grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 8px; 
            padding: 10px; 
            background: #fff;
        }
        .menu-item { 
            background: #f8f9fa; 
            border: 2px solid #eee; 
            border-radius: 10px; 
            padding: 12px; 
            text-align: center; 
            cursor: pointer; 
        }
        .menu-item:active { background: #e9ecef; transform: scale(0.97); }
        .menu-item b { display: block; font-size: 15px; margin-bottom: 2px; }
        .menu-item span { color: #d32f2f; font-weight: bold; }

        /* --- Cart Section --- */
        .cart-section { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding: 15px; 
            background: #fafafa; 
            border-top: 1px solid #eee;
        }
        .cart-row { 
            display: flex; 
            justify-content: space-between; 
            padding: 8px 0; 
            border-bottom: 1px dashed #ddd;
            font-size: 14px;
        }
        .remove-btn { color: #ff4757; font-weight: bold; margin-left: 10px; padding: 0 5px; }

        /* --- Payment & Numpad --- */
        .payment-area { background: white; padding: 15px; border-top: 2px solid #eee; }
        .total-display { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .total-label { font-size: 18px; font-weight: bold; }
        .total-val { font-size: 24px; color: #d32f2f; font-weight: bold; }
        
        .cash-display-row { font-size: 16px; margin-bottom: 10px; color: #007bff; display: flex; justify-content: space-between; }
        .cash-amount { border-bottom: 2px solid #007bff; font-weight: bold; font-size: 20px; }

        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; }
        .num-btn { 
            background: #f1f3f5; 
            border: none; 
            padding: 15px; 
            font-size: 18px; 
            font-weight: bold; 
            border-radius: 8px; 
        }
        .num-btn:active { background: #dee2e6; }
        .btn-clear { background: #ffebee; color: #d32f2f; }
        .btn-print { 
            grid-column: span 3; 
            background: #28a745; 
            color: white; 
            padding: 18px; 
            font-size: 20px; 
            border-radius: 10px; 
            border: none; 
            margin-top: 10px; 
            font-weight: bold;
        }

        /* --- Professional Receipt Style (58mm) --- */
        #receipt-print { 
            display: none; 
            width: 48mm; 
            font-family: 'Courier New', monospace; 
            font-size: 13px; 
            color: #000; 
            line-height: 1.2;
        }
        .r-center { text-align: center; }
        .r-q-box { border: 2px solid #000; padding: 5px; margin: 5px auto; width: fit-content; }
        .r-line { border-top: 1px dashed #000; margin: 5px 0; }
        .r-flex { display: flex; justify-content: space-between; }
        
        @media print {
            body * { visibility: hidden; }
            #receipt-print, #receipt-print * { visibility: visible; }
            #receipt-print { position: absolute; left: 0; top: 0; display: block !important; }
            @page { margin: 0; size: 58mm auto; }
        }
    </style>
</head>
<body>

<div class="pos-app">
    <div class="header">
        <h2>üçú ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</h2>
        <div class="q-badge">‡∏Ñ‡∏¥‡∏ß: <span id="q-text">001</span></div>
    </div>

    <div class="menu-grid">
        <div class="menu-item" onclick="addToCart('‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å', 50)"><b>‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</b><span>50.-</span></div>
        <div class="menu-item" onclick="addToCart('‡∏´‡∏°‡∏µ‡πà‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö', 50)"><b>‡∏´‡∏°‡∏µ‡πà‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö</b><span>50.-</span></div>
        <div class="menu-item" onclick="addToCart('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏´‡∏°‡∏µ‡πà', 10)"><b>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡πâ‡∏ô</b><span>10.-</span></div>
        <div class="menu-item" onclick="addToCart('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å', 10)"><b>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏Å‡πà</b><span>10.-</span></div>
        <div class="menu-item" onclick="addToCart('‡∏Å‡∏≤‡∏Å‡∏´‡∏°‡∏π', 15)"><b>‡∏Å‡∏≤‡∏Å‡∏´‡∏°‡∏π</b><span>15.-</span></div>
        <div class="menu-item" onclick="addDiscount()"><b>‡πÉ‡∏™‡πà‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</b><span>‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏≠‡∏á</span></div>
    </div>

    <div class="cart-section" id="cart-list">
        <div style="text-align:center; color:#999; margin-top:30px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
    </div>

    <div class="payment-area">
        <div class="total-display">
            <span class="total-label">‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</span>
            <span class="total-val"><span id="total-text">0</span>.-</span>
        </div>
        <div class="cash-display-row">
            <span>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô:</span>
            <span class="cash-amount" id="cash-text">0</span>
        </div>
        <div class="cash-display-row" style="color:#28a745; margin-bottom:15px;">
            <span>‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô:</span>
            <span id="change-text">0</span>
        </div>

        <div class="numpad">
            <button class="num-btn" onclick="pressNum('1')">1</button>
            <button class="num-btn" onclick="pressNum('2')">2</button>
            <button class="num-btn" onclick="pressNum('3')">3</button>
            <button class="num-btn" onclick="pressNum('4')">4</button>
            <button class="num-btn" onclick="pressNum('5')">5</button>
            <button class="num-btn" onclick="pressNum('6')">6</button>
            <button class="num-btn" onclick="pressNum('7')">7</button>
            <button class="num-btn" onclick="pressNum('8')">8</button>
            <button class="num-btn" onclick="pressNum('9')">9</button>
            <button class="num-btn btn-clear" onclick="pressNum('C')">C</button>
            <button class="num-btn" onclick="pressNum('0')">0</button>
            <button class="num-btn" onclick="pressNum('00')">00</button>
            <button class="btn-print" onclick="printReceipt()">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à & ‡∏£‡∏±‡∏ô‡∏Ñ‡∏¥‡∏ß</button>
        </div>
        <center>
            <button onclick="resetDaily()" style="margin-top:15px; background:none; border:none; color:#ccc; text-decoration:underline; font-size:11px;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà (‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô 001)</button>
        </center>
    </div>
</div>

<div id="receipt-print">
    <div class="r-center">
        <strong style="font-size:16px;">‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</strong><br>
        <span id="r-date" style="font-size:10px;"></span>
        <div class="r-q-box">
            <span style="font-size:10px;">QUEUE</span><br>
            <span id="r-q-num" style="font-size:32px; font-weight:bold;">001</span>
        </div>
    </div>
    <div class="r-line"></div>
    <div id="r-items-list"></div>
    <div class="r-line"></div>
    <div class="r-flex" style="font-weight:bold; font-size:15px;">
        <span>TOTAL</span>
        <span id="r-total">0.-</span>
    </div>
    <div class="r-flex">
        <span>CASH</span>
        <span id="r-cash">0</span>
    </div>
    <div class="r-flex">
        <span>CHANGE</span>
        <span id="r-change">0</span>
    </div>
    <div class="r-line"></div>
    <div class="r-center" style="font-size:10px;">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏î‡∏´‡∏ô‡∏∏‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö</div>
</div>

<script>
    let cart = [];
    let cashTyped = "0";
    let queue = parseInt(localStorage.getItem('my_pos_q')) || 1;
    
    document.getElementById('q-text').innerText = queue.toString().padStart(3, '0');

    function addToCart(name, price) {
        cart.push({ name, price });
        renderCart();
    }

    function addDiscount() {
        let disc = prompt("‡∏£‡∏∞‡∏ö‡∏∏‡∏¢‡∏≠‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (‡∏ö‡∏≤‡∏ó):", "0");
        if (disc && !isNaN(disc)) {
            cart.push({ name: "‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î", price: -Math.abs(parseFloat(disc)) });
            renderCart();
        }
    }

    function renderCart() {
        let html = "";
        let total = 0;
        cart.forEach((item, index) => {
            html += `<div class="cart-row">
                <span>${item.name}</span>
                <span>${item.price.toLocaleString()}.- <b class="remove-btn" onclick="removeFromCart(${index})">√ó</b></span>
            </div>`;
            total += item.price;
        });
        document.getElementById('cart-list').innerHTML = cart.length ? html : '<div style="text-align:center; color:#999; margin-top:30px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>';
        document.getElementById('total-text').innerText = total.toLocaleString();
        updateChange();
    }

    function removeFromCart(index) {
        cart.splice(index, 1);
        renderCart();
    }

    function pressNum(n) {
        if (n === 'C') cashTyped = "0";
        else {
            if (cashTyped === "0") cashTyped = n;
            else cashTyped += n;
        }
        document.getElementById('cash-text').innerText = parseInt(cashTyped).toLocaleString();
        updateChange();
    }

    function updateChange() {
        let total = cart.reduce((s, i) => s + i.price, 0);
        let cash = parseInt(cashTyped);
        let change = cash - total;
        document.getElementById('change-text').innerText = (change > 0) ? change.toLocaleString() : "0";
    }

    function printReceipt() {
        let total = cart.reduce((s, i) => s + i.price, 0);
        let cash = parseInt(cashTyped);
        
        if (cart.length === 0) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£!");
        if (cash < total) return alert("‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!");

        // Set Receipt Data
        document.getElementById('r-q-num').innerText = queue.toString().padStart(3, '0');
        document.getElementById('r-date').innerText = new Date().toLocaleString('th-TH');
        document.getElementById('r-total').innerText = total.toLocaleString() + ".-";
        document.getElementById('r-cash').innerText = cash.toLocaleString();
        document.getElementById('r-change').innerText = (cash - total).toLocaleString();

        let itemHtml = "";
        cart.forEach(item => {
            itemHtml += `<div class="r-flex"><span>${item.name}</span><span>${item.price.toLocaleString()}</span></div>`;
        });
        document.getElementById('r-items-list').innerHTML = itemHtml;

        window.print();

        // Step up Queue
        queue++;
        localStorage.setItem('my_pos_q', queue);
        document.getElementById('q-text').innerText = queue.toString().padStart(3, '0');

        // Reset App
        cart = [];
        cashTyped = "0";
        document.getElementById('cash-text').innerText = "0";
        renderCart();
    }

    function resetDaily() {
        if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏¥‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 001?")) {
            queue = 1;
            localStorage.setItem('my_pos_q', queue);
            location.reload();
        }
    }
</script>

</body>
</html>
