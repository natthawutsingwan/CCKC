<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Professional POS - Chicken Noodle</title>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Tahoma', sans-serif; background: #f0f2f5; margin: 0; padding: 10px; display: flex; justify-content: center; }
        .pos-app { width: 100%; max-width: 500px; background: #fff; border-radius: 20px; overflow: hidden; display: flex; flex-direction: column; height: 95vh; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        /* Header */
        .header { background: #d32f2f; color: white; padding: 15px; text-align: center; position: relative; }
        .q-display { font-size: 24px; font-weight: bold; background: rgba(0,0,0,0.2); border-radius: 10px; padding: 5px 15px; margin-top: 5px; display: inline-block; }

        /* Menu Section */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; background: #fff; border-bottom: 2px solid #eee; }
        .menu-item { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px; padding: 15px; text-align: center; cursor: pointer; transition: 0.2s; }
        .menu-item:active { background: #e2e6ea; transform: scale(0.95); }
        .menu-item b { display: block; font-size: 16px; color: #333; }
        .menu-item span { color: #d32f2f; font-weight: bold; }

        /* Order Summary */
        .order-summary { flex-grow: 1; padding: 15px; overflow-y: auto; background: #fafafa; }
        .order-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; border-bottom: 1px dashed #ddd; padding-bottom: 5px; }

        /* Payment Section */
        .payment-section { background: #fff; padding: 15px; border-top: 1px solid #eee; }
        .display-box { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .total-text { font-size: 22px; font-weight: bold; color: #d32f2f; }
        .cash-input-area { font-size: 20px; font-weight: bold; color: #007bff; border-bottom: 2px solid #007bff; min-width: 100px; text-align: right; }

        /* Numpad */
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 10px; }
        .num-btn { background: #f1f3f5; border: none; padding: 15px; font-size: 18px; font-weight: bold; border-radius: 8px; cursor: pointer; }
        .num-btn:active { background: #dee2e6; }
        .btn-clear { background: #ffebee; color: #d32f2f; }
        .btn-confirm { background: #28a745; color: white; grid-column: span 3; margin-top: 10px; padding: 18px; font-size: 20px; border-radius: 10px; border: none; font-weight: bold; }

        /* Receipt (Hidden) */
        #receipt-section { display: none; width: 48mm; font-family: monospace; font-size: 11px; }

        @media print {
            body * { visibility: hidden; }
            #receipt-section, #receipt-section * { visibility: visible; }
            #receipt-section { position: absolute; left: 0; top: 0; display: block; }
        }
    </style>
</head>
<body>

<div class="pos-app">
    <div class="header">
        <b>üçú‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å ‡∏ä‡∏¥‡∏Å‡∏ä‡∏¥‡∏Å‡πÄ‡∏Å‡πâ‡∏ô‡∏â‡∏µ‡∏Å</b><br>
        <div class="q-display">‡∏Ñ‡∏¥‡∏ß‡∏ï‡πà‡∏≠‡πÑ‡∏õ: <span id="q-val">001</span></div>
    </div>

    <div class="menu-grid">
        <div class="menu-item" onclick="addItem('‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å', 50)"><b>‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</b><span>50.-</span></div>
        <div class="menu-item" onclick="addItem('‡∏´‡∏°‡∏µ‡πà‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö', 50)"><b>‡∏´‡∏°‡∏µ‡πà‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö</b><span>50.-</span></div>
        <div class="menu-item" onclick="addItem('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏´‡∏°‡∏µ‡πà', 10)"><b>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡πâ‡∏ô</b><span>10.-</span></div>
        <div class="menu-item" onclick="addItem('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å', 10)"><b>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏Å‡πà</b><span>10.-</span></div>
        <div class="menu-item" onclick="addItem('‡∏ô‡πç‡πâ‡∏≤‡∏û‡∏£‡∏¥‡∏Å‡∏Å‡∏≤‡∏Å‡∏´‡∏°‡∏π', 15)"><b>‡∏Å‡∏≤‡∏Å‡∏´‡∏°‡∏π</b><span>15.-</span></div>
        <div class="menu-item" onclick="addItem('‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î', -1, true)"><b>‡πÉ‡∏™‡πà‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</b><span>‡∏Ñ‡∏µ‡∏¢‡πå‡∏£‡∏∞‡∏ö‡∏∏</span></div>
    </div>

    <div class="order-summary" id="order-list">
        <div style="color:#999; text-align:center; margin-top:20px;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
    </div>

    <div class="payment-section">
        <div class="display-box">
            <span class="total-text">‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: <span id="total-amount">0</span>.-</span>
            <div>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô: <span class="cash-input-area" id="cash-display">0</span></div>
        </div>
        <div class="display-box" style="margin-bottom:0">
            <span style="color:#28a745; font-weight:bold;">‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô: <span id="change-amount">0</span>.-</span>
        </div>

        <div class="numpad">
            <button class="num-btn" onclick="pressNum('1')">1</button>
            <button class="num-btn" onclick="pressNum('2')">2</button>
            <button class="num-btn" onclick="pressNum('3')">3</button>
            <button class="num-btn" onclick="pressNum('4')">4</button>
            <button class="num-btn" onclick="pressNum('5')">5</button>
            <button class="num-btn" onclick="pressNum('6')">6</button>
            <button class="num-btn" onclick="pressNum('7')">7</button>
            <button class="num-btn" onclick="pressNum('8')">8</button>
            <button class="num-btn" onclick="pressNum('9')">9</button>
            <button class="num-btn btn-clear" onclick="pressNum('C')">C</button>
            <button class="num-btn" onclick="pressNum('0')">0</button>
            <button class="num-btn" onclick="pressNum('00')">00</button>
            <button class="btn-confirm" onclick="finalizeOrder()">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à & ‡∏£‡∏±‡∏ô‡∏Ñ‡∏¥‡∏ß</button>
        </div>
        <center><button onclick="resetEverything()" style="background:none; border:none; color:#ccc; font-size:10px; margin-top:10px; text-decoration:underline;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà / ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß</button></center>
    </div>
</div>

<div id="receipt-section">
    <center>
    <div style="font-size:18px; font-weight:bold;">
        <span>‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Å‡πà‡∏â‡∏µ‡∏Å</span>
    </div>
        <strong>‡∏ä‡∏¥‡∏Å‡∏ä‡∏¥‡∏Å‡πÄ‡∏Å‡πâ‡∏ô‡∏â‡∏µ‡∏Å ‡∏™‡∏≤‡∏Ç‡∏≤ ‡πÅ‡∏°‡πà‡πÇ‡∏à‡πâ‡∏ã‡∏≠‡∏¢ 9</strong><br>
        <span style="font-size:20px; font-weight:bold;"><span id="r-q"></span></span><br>
        <span id="r-time"></span><br>
    </center>
    <div style="border-top:1px dashed #000; margin:5px 0;"></div>
    <div id="r-items"></div>
    <div style="border-top:1px dashed #000; margin:5px 0;"></div>
    <div style="display:flex; justify-content:space-between; font-weight:bold;">
        <span>‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</span>
        <span id="r-total"></span>
    </div>
    <div style="display:flex; justify-content:space-between;">
        <span>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</span>
        <span id="r-cash"></span>
    </div>
    <div style="display:flex; justify-content:space-between;">
        <span>‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô</span>
        <span id="r-change"></span>
    </div>
    <center style="margin-top:12px;">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞</center>
</div>

<script>
    let cart = [];
    let cashInput = "0";
    let q = parseInt(localStorage.getItem('pos_q_v3')) || 1;
    document.getElementById('q-val').innerText = q.toString().padStart(3, '0');

    function addItem(name, price, isDiscount = false) {
        if(isDiscount) {
            let disc = prompt("‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (‡∏ö‡∏≤‡∏ó):", "0");
            if(disc && !isNaN(disc)) {
                cart.push({ name: "‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î", price: -Math.abs(parseFloat(disc)) });
            }
        } else {
            cart.push({ name: name, price: price });
        }
        renderOrder();
    }

    function renderOrder() {
        let listHtml = "";
        let total = 0;
        cart.forEach((item, index) => {
            listHtml += `<div class="order-row">
                <span>${item.name}</span>
                <span>${item.price.toLocaleString()}.- <small onclick="removeItem(${index})" style="color:red; margin-left:10px;">[x]</small></span>
            </div>`;
            total += item.price;
        });
        document.getElementById('order-list').innerHTML = cart.length ? listHtml : '<div style="color:#999; text-align:center; margin-top:20px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>';
        document.getElementById('total-amount').innerText = total.toLocaleString();
        updateChange();
    }

    function removeItem(index) {
        cart.splice(index, 1);
        renderOrder();
    }

    function pressNum(num) {
        if(num === 'C') {
            cashInput = "0";
        } else {
            if(cashInput === "0") cashInput = num;
            else cashInput += num;
        }
        document.getElementById('cash-display').innerText = parseInt(cashInput).toLocaleString();
        updateChange();
    }

    function updateChange() {
        let total = cart.reduce((sum, item) => sum + item.price, 0);
        let cash = parseInt(cashInput);
        let change = cash - total;
        document.getElementById('change-amount').innerText = (change > 0) ? change.toLocaleString() : "0";
    }

    function finalizeOrder() {
        let total = cart.reduce((sum, item) => sum + item.price, 0);
        let cash = parseInt(cashInput);
        
        if(cart.length === 0) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£!");
        if(cash < total) return alert("‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!");

        // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        document.getElementById('r-q').innerText = q.toString().padStart(3, '0');
        document.getElementById('r-time').innerText = new Date().toLocaleString('th-TH');
        document.getElementById('r-total').innerText = total.toLocaleString();
        document.getElementById('r-cash').innerText = cash.toLocaleString();
        document.getElementById('r-change').innerText = (cash - total).toLocaleString();
        
        let itemHtml = "";
        cart.forEach(item => {
            itemHtml += `<div style="display:flex; justify-content:space-between;"><span>${item.name}</span><span>${item.price}</span></div>`;
        });
        document.getElementById('r-items').innerHTML = itemHtml;

        window.print();

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏¥‡∏ß
        q++;
        localStorage.setItem('pos_q_v3', q);
        document.getElementById('q-val').innerText = q.toString().padStart(3, '0');

        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        cart = [];
        cashInput = "0";
        document.getElementById('cash-display').innerText = "0";
        renderOrder();
    }

    function resetEverything() {
        if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà 001?")) {
            q = 1;
            localStorage.setItem('pos_q_v3', q);
            location.reload();
        }
    }
</script>

</body>
</html>
